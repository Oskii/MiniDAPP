(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{cRhG:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfilePageModule",function(){return y});var o=n("0lCN"),i=n("ofXK"),r=n("3Pt+"),s=n("TEn/"),a=n("tyNb"),c=n("mrSG"),l=n("AytR"),d=n("wd/R"),b=n("fXoL"),g=n("rux5"),p=n("ON18"),u=n("KNWA"),h=n("rT0V"),f=n("LLDH");const m=["resetBtn"];function C(e,t){1&e&&(b.Lb(0,"span"),b.nc(1," Activate Maxima "),b.Kb())}function v(e,t){1&e&&(b.Lb(0,"span"),b.nc(1," Activated "),b.Kb())}const w=function(e,t){return{"is-available":e,unavailable:t}},_="lastReset.txt",M=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i){this.toastController=e,this.alertController=t,this._storeService=n,this._loginService=o,this._directus=i,this.user={email:"Unavailable",refID:"",pKey:""},this.isMaxima=!1,this.resetStatus="Reset Rewards",this.user.email="Unavailable",this.user.refID="Unavailable",this.user.pKey="Unavailable"}ionViewWillEnter(){this.getResetTime(),this._storeService.getUserDetailsOnce().then(e=>{this.user=e}),this.$referralCode=this._storeService.referralCode.subscribe(e=>{this.referralCode=e}),this.$lastAccess=this._storeService.lastAccess.subscribe(e=>{this.date=d(e.milliseconds).format("MMM DD, YYYY"),this.time=d(e.milliseconds).format("HH:mm:ss")})}ionViewWillLeave(){this.$referralCode.unsubscribe(),this.$lastAccess.unsubscribe()}signOut(){this._loginService.logout()}copy(e){document.addEventListener("copy",t=>{t.clipboardData.setData("text/plain",e),this.presentToast("Copied To Clipboard","primary","bottom"),t.preventDefault(),document.removeEventListener("copy",null)}),document.execCommand("copy")}getResetTime(){return Object(c.a)(this,void 0,void 0,function*(){this._storeService.loadFile(_).then(e=>{const t=(new Date).getTime(),n=JSON.parse(e),o=l.a.resetTime;if(t-n.lastReset>o)this.resetStatus="Reset Rewards",this.resetBtn.disabled=!1;else{const e=d(t),i=d(n.lastReset+o);this.resetStatus="in a few seconds"===e.to(i)?e.to(i):"Available "+e.to(i),this.resetBtn.disabled=!0}}).catch(e=>{console.log(""+e,"..user has not reset before this or has re-installed."),this.resetStatus="Reset Rewards"})})}presentToast(e,t,n){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.toastController.create({message:e,duration:2e3,color:t,position:n});yield o.present()})}presentAlert(){return Object(c.a)(this,void 0,void 0,function*(){this.resetBtn.disabled=!0,this.resetStatus="Resetting...";const e=yield this.alertController.create({header:"Rewards reset",subHeader:"Are you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{this.resetBtn.disabled=!1,this.resetStatus="Reset Rewards"}},{text:"Reset",handler:()=>{this.resetWallet(this.user.refID,this.user.loginData.access_token).then(e=>{this.resetStatus="Reset Complete!",this.presentToast("Rewards reset successfully, logging you out...","success","bottom"),this._storeService.deleteFile("userKey.txt");const t=(new Date).getTime(),n=JSON.stringify({lastReset:t});this._storeService.saveFile(n,_).then(e=>{setTimeout(()=>{this.signOut()},3e3)}).catch(e=>{console.log(""+e),setTimeout(()=>{this.signOut()},3e3)})}).catch(e=>{this.resetBtn.disabled=!1,this.resetStatus="Reset Rewards",console.log(""+e),this.presentToast("Rewards failed to reset because you've already attempted a reset less than 24 hours ago.","danger","bottom")})}}]});return yield e.present()})}activateMaxima(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this._storeService.activateMaxima();console.log(e),e&&console.log("User is now a Maxima node runner")})}resetWallet(e,t){return Object(c.a)(this,void 0,void 0,function*(){return new Promise((n,o)=>{this._directus.resetWallet(e,t).then(e=>(e.ok||o("Resetting wallet unavailable."),e.json())).then(e=>{var t,i;if(null==e?void 0:e.errors)return console.log(""+(null===(t=e.errors[0])||void 0===t?void 0:t.message)),void o(""+(null===(i=e.errors[0])||void 0===i?void 0:i.message));{const t=JSON.parse(e);"OK"===(null==t?void 0:t.result)&&n(!0)}}).catch(e=>{console.log(""+e)})})})}}return e.\u0275fac=function(t){return new(t||e)(b.Ib(s.D),b.Ib(s.a),b.Ib(g.a),b.Ib(p.a),b.Ib(u.a))},e.\u0275cmp=b.Cb({type:e,selectors:[["app-profile"]],viewQuery:function(e,t){if(1&e&&b.qc(m,!0),2&e){let e;b.ec(e=b.Ub())&&(t.resetBtn=e.first)}},decls:68,vars:13,consts:[[3,"$toolbarTitle"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"profile-list","ion-no-padding"],[1,"profile","ion-no-padding","animate__animated","animate__fadeIn"],["size","2",1,"ion-no-padding","ion-text-left"],["src","assets/incentiveCashEmail.svg",1,"profile-icons"],[1,"information"],["src","assets/incentiveCashPassword.svg",1,"profile-icons"],["id","change-pwd-btn","routerLink","/password","type","button","fill","clear"],["src","assets/incentiveCashLastAccess.svg",1,"profile-icons"],[3,"hidden"],["name","git-network-outline",1,"profile-icons"],["type","button","fill","clear",3,"click"],[4,"ngIf"],["src","assets/incentiveCashReset.svg",1,"profile-icons"],["href","https://discord.gg/WB3p9rUNva"],["size","12","size-sm",""],[1,"ion-no-padding","ion-no-margin"],["type","button","id","reset-btn",3,"ngClass","click"],["resetBtn",""],[1,"ion-no-padding"],["id","note"]],template:function(e,t){1&e&&(b.Jb(0,"toolbar-header",0),b.Lb(1,"ion-content",1),b.Lb(2,"ion-header",2),b.Lb(3,"ion-toolbar"),b.Lb(4,"ion-title",3),b.nc(5,"Incentive Cash"),b.Kb(),b.Kb(),b.Kb(),b.Lb(6,"ion-list",4),b.Lb(7,"ion-grid",5),b.Lb(8,"ion-row"),b.Lb(9,"ion-col",6),b.Jb(10,"ion-icon",7),b.Kb(),b.Lb(11,"ion-col",8),b.nc(12),b.Kb(),b.Kb(),b.Lb(13,"ion-row"),b.Lb(14,"ion-col",6),b.Jb(15,"ion-icon",9),b.Kb(),b.Lb(16,"ion-col",8),b.Lb(17,"h6"),b.nc(18,"Password"),b.Kb(),b.Lb(19,"ion-button",10),b.nc(20,"Change password"),b.Kb(),b.Kb(),b.Kb(),b.Lb(21,"ion-row"),b.Lb(22,"ion-col",6),b.Jb(23,"ion-icon",11),b.Kb(),b.Lb(24,"ion-col",8),b.Lb(25,"h6"),b.nc(26,"Last access"),b.Kb(),b.Lb(27,"p"),b.nc(28),b.Kb(),b.Lb(29,"p"),b.nc(30),b.Kb(),b.Kb(),b.Kb(),b.Lb(31,"ion-row",12),b.Lb(32,"ion-col",6),b.Jb(33,"ion-icon",13),b.Kb(),b.Lb(34,"ion-col",8),b.Lb(35,"h6"),b.nc(36,"Run a Maxima node and earn more Minima coins."),b.Kb(),b.Lb(37,"p"),b.nc(38,"Help build our layer 2 network to earn up to 5 coins per day until Mainnet launch."),b.Kb(),b.Lb(39,"ion-button",14),b.Tb("click",function(){return t.activateMaxima()}),b.lc(40,C,2,0,"span",15),b.lc(41,v,2,0,"span",15),b.Kb(),b.Kb(),b.Kb(),b.Lb(42,"ion-row"),b.Lb(43,"ion-col",6),b.Jb(44,"ion-icon",16),b.Kb(),b.Lb(45,"ion-col",8),b.Lb(46,"h6"),b.nc(47,"Reset rewards"),b.Kb(),b.Lb(48,"p"),b.nc(49," Resetting your rewards will wipe your current pending rewards and log you out. Once you log back in, you will get a new rewards allocation. This action will not gain you anything, so only reset once you have no rewards pending. "),b.Jb(50,"br"),b.Jb(51,"br"),b.nc(52," If you believe you are missing rewards, please "),b.Lb(53,"a",17),b.nc(54,"open"),b.Kb(),b.nc(55," a support ticket, providing your account email address & a screenshot of your Claimed & Pending Rewards. "),b.Kb(),b.Lb(56,"ion-row"),b.Lb(57,"ion-col",18),b.Lb(58,"h2",19),b.Lb(59,"ion-button",20,21),b.Tb("click",function(){return t.presentAlert()}),b.nc(61),b.Kb(),b.Kb(),b.Lb(62,"p",22),b.Lb(63,"ion-note",23),b.Lb(64,"strong"),b.nc(65,"Note"),b.Kb(),b.nc(66," \u2014 this action is available once every 24 hours."),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Jb(67,"custom-footer")),2&e&&(b.ac("$toolbarTitle","Profile"),b.yb(1),b.ac("fullscreen",!0),b.yb(11),b.oc(t.user.email),b.yb(16),b.pc("Date: ",t.date,""),b.yb(2),b.pc("Time: ",t.time,""),b.yb(1),b.ac("hidden",!0),b.yb(9),b.ac("ngIf",!t.isMaxima),b.yb(1),b.ac("ngIf",t.isMaxima),b.yb(18),b.ac("ngClass",b.dc(10,w,"Reset Rewards"===t.resetStatus,"Reset Rewards"!==t.resetStatus&&"Reset Complete!"!==t.resetStatus)),b.yb(2),b.pc(" ",t.resetStatus?t.resetStatus:"Reset Rewards"," "))},directives:[h.a,s.h,s.k,s.x,s.w,s.p,s.j,s.t,s.g,s.l,s.d,s.B,a.h,i.k,i.i,s.q,f.a],styles:["ion-list.profile-list[_ngcontent-%COMP%]{margin-top:12px;background-color:initial;margin-left:27px;margin-right:27px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.pre-header[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{margin-bottom:0}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-bottom:.5px solid #d2e0ff;padding-bottom:21px;margin-top:21px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-icon.profile-icons[_ngcontent-%COMP%]{width:36px;height:36px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]{padding-top:5px;color:#91919d;font-size:16px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#031b32;padding:0 0 5px;margin:0}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font-family:manrope-regular}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px 0 0;width:167px;height:35px;font-size:12px;text-transform:none}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   #change-pwd-btn[_ngcontent-%COMP%]{--border-radius:5px;--border-width:1px;--border-style:solid;--border-color:#031b32;--color:#031b32;--background-hover:#031b32;--background-hover-opacity:1;--color-hover:#f0f0fa}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   #reset-btn[_ngcontent-%COMP%]{--background:var(--ion-color-danger);--color:#f0f0fa;--background-hover:var(--ion-color-danger);--border-color:var(--ion-color-danger);--border-width:1px;--border-style:solid;--border-radius:5px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;width:100%;border:none;background:#fff;padding:10px;letter-spacing:.2em;white-space:normal;overflow:hidden;text-overflow:ellipsis}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#031b32;color:#f0f0fa}@media only screen and (min-width:992px){ion-list.profile-list[_ngcontent-%COMP%]{margin-left:110px;margin-right:110px}ion-header[_ngcontent-%COMP%]   ion-toolbar.page-header[_ngcontent-%COMP%]{padding-left:110px;padding-right:110px}}#note[_ngcontent-%COMP%]{font-size:.8rem;margin-top:.1rem}.unavailable[_ngcontent-%COMP%]{--border-radius:5px;--border-width:1px;--border-style:solid;--border-color:#031b32;--color:#031b32;--background-hover:#031b32;--background-hover-opacity:1;--color-hover:#f0f0fa}"]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=b.Gb({type:e}),e.\u0275inj=b.Fb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(M)],a.j]}),e})(),y=(()=>{class e{}return e.\u0275mod=b.Gb({type:e}),e.\u0275inj=b.Fb({factory:function(t){return new(t||e)},imports:[[i.b,r.d,s.y,O,o.a]]}),e})()}}]);