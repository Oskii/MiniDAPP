(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{cRhG:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfilePageModule",function(){return P});var o=n("0lCN"),i=n("ofXK"),r=n("3Pt+"),s=n("TEn/"),a=n("tyNb"),c=n("mrSG"),l=n("AytR"),b=n("wd/R"),d=n("fXoL"),g=n("rux5"),p=n("ON18"),u=n("KNWA"),h=n("rT0V"),f=n("LLDH");const m=["resetBtn"];function C(e,t){1&e&&(d.Kb(0,"span"),d.kc(1," Activate Maxima "),d.Jb())}function v(e,t){1&e&&(d.Kb(0,"span"),d.kc(1," Activated "),d.Jb())}const w=function(e,t){return{"is-available":e,unavailable:t}},_="lastReset.txt",M=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i){this.toastController=e,this.alertController=t,this._storeService=n,this._loginService=o,this._directus=i,this.user={email:"Unavailable",refID:"",pKey:""},this.isMaxima=!1,this.resetStatus="Reset Rewards",this.user.email="Unavailable",this.user.refID="Unavailable",this.user.pKey="Unavailable"}ionViewWillEnter(){this.getResetTime(),this._storeService.getUserDetailsOnce().then(e=>{this.user=e}),this.$referralCode=this._storeService.referralCode.subscribe(e=>{this.referralCode=e}),this.$lastAccess=this._storeService.lastAccess.subscribe(e=>{this.date=b(e.milliseconds).format("MMM DD, YYYY"),this.time=b(e.milliseconds).format("HH:mm:ss")})}ionViewWillLeave(){this.$referralCode.unsubscribe(),this.$lastAccess.unsubscribe()}signOut(){this._loginService.logout()}copy(e){document.addEventListener("copy",t=>{t.clipboardData.setData("text/plain",e),this.presentToast("Copied To Clipboard","primary","bottom"),t.preventDefault(),document.removeEventListener("copy",null)}),document.execCommand("copy")}getResetTime(){return Object(c.a)(this,void 0,void 0,function*(){this._storeService.loadFile(_).then(e=>{const t=(new Date).getTime(),n=JSON.parse(e),o=l.a.resetTime;if(t-n.lastReset>o)this.resetStatus="Reset Rewards",this.resetBtn.disabled=!1;else{const e=b(t),i=b(n.lastReset+o);this.resetStatus="in a few seconds"===e.to(i)?e.to(i):"Available "+e.to(i),this.resetBtn.disabled=!0}}).catch(e=>{console.log(""+e,"..user has not reset before this or has re-installed."),this.resetStatus="Reset Rewards"})})}presentToast(e,t,n){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.toastController.create({message:e,duration:2e3,color:t,position:n});yield o.present()})}presentAlert(){return Object(c.a)(this,void 0,void 0,function*(){this.resetBtn.disabled=!0,this.resetStatus="Resetting...";const e=yield this.alertController.create({header:"Rewards reset",subHeader:"Are you sure?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{this.resetBtn.disabled=!1,this.resetStatus="Reset Rewards"}},{text:"Reset",handler:()=>{this.resetWallet(this.user.refID,this.user.loginData.access_token).then(e=>{this.resetStatus="Reset Complete!",this.presentToast("Rewards reset successfully, logging you out...","success","bottom"),this._storeService.deleteFile("userKey.txt");const t=(new Date).getTime(),n=JSON.stringify({lastReset:t});this._storeService.saveFile(n,_).then(e=>{setTimeout(()=>{this.signOut()},3e3)}).catch(e=>{console.log(""+e),setTimeout(()=>{this.signOut()},3e3)})}).catch(e=>{this.resetBtn.disabled=!1,this.resetStatus="Reset Rewards",console.log(""+e),this.presentToast("Rewards failed to reset because you've already attempted a reset less than 24 hours ago.","danger","bottom")})}}]});return yield e.present()})}activateMaxima(){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this._storeService.activateMaxima();console.log(e),e&&console.log("User is now a Maxima node runner")})}resetWallet(e,t){return Object(c.a)(this,void 0,void 0,function*(){return new Promise((n,o)=>{this._directus.resetWallet(e,t).then(e=>(e.ok||o("Resetting wallet unavailable."),e.json())).then(e=>{var t,i;if(null==e?void 0:e.errors)return console.log(""+(null===(t=e.errors[0])||void 0===t?void 0:t.message)),void o(""+(null===(i=e.errors[0])||void 0===i?void 0:i.message));{const t=JSON.parse(e);"OK"===(null==t?void 0:t.result)&&n(!0)}}).catch(e=>{console.log(""+e)})})})}}return e.\u0275fac=function(t){return new(t||e)(d.Hb(s.E),d.Hb(s.a),d.Hb(g.a),d.Hb(p.a),d.Hb(u.a))},e.\u0275cmp=d.Bb({type:e,selectors:[["app-profile"]],viewQuery:function(e,t){if(1&e&&d.nc(m,!0),2&e){let e;d.ec(e=d.Tb())&&(t.resetBtn=e.first)}},decls:64,vars:13,consts:[[3,"$toolbarTitle"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"profile-list","ion-no-padding"],[1,"profile","ion-no-padding","animate__animated","animate__fadeIn"],["size","2",1,"ion-no-padding","ion-text-left"],["src","assets/incentiveCashEmail.svg",1,"profile-icons"],[1,"information"],["src","assets/incentiveCashPassword.svg",1,"profile-icons"],["id","change-pwd-btn","routerLink","/password","type","button","fill","clear"],["src","assets/incentiveCashLastAccess.svg",1,"profile-icons"],[3,"hidden"],["name","git-network-outline",1,"profile-icons"],["type","button","fill","clear",3,"click"],[4,"ngIf"],["src","assets/incentiveCashReset.svg",1,"profile-icons"],["size","12","size-sm",""],[1,"ion-no-padding","ion-no-margin"],["type","button","id","reset-btn",3,"ngClass","click"],["resetBtn",""],[1,"ion-no-padding"],["id","note"]],template:function(e,t){1&e&&(d.Ib(0,"toolbar-header",0),d.Kb(1,"ion-content",1),d.Kb(2,"ion-header",2),d.Kb(3,"ion-toolbar"),d.Kb(4,"ion-title",3),d.kc(5,"Incentive Cash"),d.Jb(),d.Jb(),d.Jb(),d.Kb(6,"ion-list",4),d.Kb(7,"ion-grid",5),d.Kb(8,"ion-row"),d.Kb(9,"ion-col",6),d.Ib(10,"ion-icon",7),d.Jb(),d.Kb(11,"ion-col",8),d.kc(12),d.Jb(),d.Jb(),d.Kb(13,"ion-row"),d.Kb(14,"ion-col",6),d.Ib(15,"ion-icon",9),d.Jb(),d.Kb(16,"ion-col",8),d.Kb(17,"h6"),d.kc(18,"Password"),d.Jb(),d.Kb(19,"ion-button",10),d.kc(20,"Change password"),d.Jb(),d.Jb(),d.Jb(),d.Kb(21,"ion-row"),d.Kb(22,"ion-col",6),d.Ib(23,"ion-icon",11),d.Jb(),d.Kb(24,"ion-col",8),d.Kb(25,"h6"),d.kc(26,"Last access"),d.Jb(),d.Kb(27,"p"),d.kc(28),d.Jb(),d.Kb(29,"p"),d.kc(30),d.Jb(),d.Jb(),d.Jb(),d.Kb(31,"ion-row",12),d.Kb(32,"ion-col",6),d.Ib(33,"ion-icon",13),d.Jb(),d.Kb(34,"ion-col",8),d.Kb(35,"h6"),d.kc(36,"Run a Maxima node and earn more Minima coins."),d.Jb(),d.Kb(37,"p"),d.kc(38,"Help build our layer 2 network to earn up to 5 coins per day until Mainnet launch."),d.Jb(),d.Kb(39,"ion-button",14),d.Sb("click",function(){return t.activateMaxima()}),d.jc(40,C,2,0,"span",15),d.jc(41,v,2,0,"span",15),d.Jb(),d.Jb(),d.Jb(),d.Kb(42,"ion-row"),d.Kb(43,"ion-col",6),d.Ib(44,"ion-icon",16),d.Jb(),d.Kb(45,"ion-col",8),d.Kb(46,"h6"),d.kc(47,"Reset rewards"),d.Jb(),d.Kb(48,"p"),d.kc(49," Resetting your rewards will wipe your current pending rewards and log you out. Once you log back in, you will get a new rewards allocation. This action will not gain you anything, so only reset once you have no rewards pending. "),d.Ib(50,"br"),d.Ib(51,"br"),d.Jb(),d.Kb(52,"ion-row"),d.Kb(53,"ion-col",17),d.Kb(54,"h2",18),d.Kb(55,"ion-button",19,20),d.Sb("click",function(){return t.presentAlert()}),d.kc(57),d.Jb(),d.Jb(),d.Kb(58,"p",21),d.Kb(59,"ion-note",22),d.Kb(60,"strong"),d.kc(61,"Note"),d.Jb(),d.kc(62," \u2014 this action is available once every 24 hours."),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Ib(63,"custom-footer")),2&e&&(d.Zb("$toolbarTitle","Profile"),d.xb(1),d.Zb("fullscreen",!0),d.xb(11),d.lc(t.user.email),d.xb(16),d.mc("Date: ",t.date,""),d.xb(2),d.mc("Time: ",t.time,""),d.xb(1),d.Zb("hidden",!0),d.xb(9),d.Zb("ngIf",!t.isMaxima),d.xb(1),d.Zb("ngIf",t.isMaxima),d.xb(14),d.Zb("ngClass",d.cc(10,w,"Reset Rewards"===t.resetStatus,"Reset Rewards"!==t.resetStatus&&"Reset Complete!"!==t.resetStatus)),d.xb(2),d.mc(" ",t.resetStatus?t.resetStatus:"Reset Rewards"," "))},directives:[h.a,s.k,s.n,s.z,s.y,s.s,s.m,s.w,s.j,s.o,s.d,s.C,a.h,i.k,i.i,s.t,f.a],styles:["ion-list.profile-list[_ngcontent-%COMP%]{margin-top:12px;background-color:initial;margin-left:27px;margin-right:27px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.pre-header[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{margin-bottom:0}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-bottom:.5px solid #d2e0ff;padding-bottom:21px;margin-top:21px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-icon.profile-icons[_ngcontent-%COMP%]{width:36px;height:36px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]{padding-top:5px;color:#91919d;font-size:16px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#031b32;padding:0 0 5px;margin:0}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font-family:manrope-regular}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px 0 0;width:167px;height:35px;font-size:12px;text-transform:none}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   #change-pwd-btn[_ngcontent-%COMP%]{--border-radius:5px;--border-width:1px;--border-style:solid;--border-color:#031b32;--color:#031b32;--background-hover:#031b32;--background-hover-opacity:1;--color-hover:#f0f0fa}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   #reset-btn[_ngcontent-%COMP%]{--background:var(--ion-color-danger);--color:#f0f0fa;--background-hover:var(--ion-color-danger);--border-color:var(--ion-color-danger);--border-width:1px;--border-style:solid;--border-radius:5px}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;width:100%;border:none;background:#fff;padding:10px;letter-spacing:.2em;white-space:normal;overflow:hidden;text-overflow:ellipsis}ion-list.profile-list[_ngcontent-%COMP%]   ion-grid.profile[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.information[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#031b32;color:#f0f0fa}@media only screen and (min-width:992px){ion-list.profile-list[_ngcontent-%COMP%]{margin-left:110px;margin-right:110px}ion-header[_ngcontent-%COMP%]   ion-toolbar.page-header[_ngcontent-%COMP%]{padding-left:110px;padding-right:110px}}#note[_ngcontent-%COMP%]{font-size:.8rem;margin-top:.1rem}.unavailable[_ngcontent-%COMP%]{--border-radius:5px;--border-width:1px;--border-style:solid;--border-color:#031b32;--color:#031b32;--background-hover:#031b32;--background-hover-opacity:1;--color-hover:#f0f0fa}"]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=d.Fb({type:e}),e.\u0275inj=d.Eb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(M)],a.j]}),e})(),P=(()=>{class e{}return e.\u0275mod=d.Fb({type:e}),e.\u0275inj=d.Eb({factory:function(t){return new(t||e)},imports:[[i.b,r.d,s.A,O,o.a]]}),e})()}}]);