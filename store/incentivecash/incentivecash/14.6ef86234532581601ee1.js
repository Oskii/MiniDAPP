(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"0lCN":function(n,t,e){"use strict";e.d(t,"a",function(){return s});var o=e("rux5"),i=e("tyNb"),a=e("TEn/"),r=e("ofXK"),c=e("fXoL");let s=(()=>{class n{}return n.\u0275mod=c.Fb({type:n}),n.\u0275inj=c.Eb({factory:function(t){return new(t||n)},providers:[{provide:"_storeService",useClass:o.a}],imports:[[r.b,a.A,i.j]]}),n})()},GvLF:function(n,t,e){"use strict";e.r(t),e.d(t,"RewardsPageModule",function(){return k});var o=e("0lCN"),i=e("ofXK"),a=e("3Pt+"),r=e("TEn/"),c=e("tyNb"),s=e("QSgb"),l=e("fXoL"),d=e("rux5"),b=e("KNWA"),g=e("Q+GK"),u=e("LLDH");function f(n,t){if(1&n&&(l.Kb(0,"ion-row",6),l.Kb(1,"ion-col",7),l.kc(2),l.Jb(),l.Jb()),2&n){const n=l.Ub();l.xb(2),l.mc(" ",n.status," ")}}const m=function(){return{color:"var(--ion-color-primary"}},p=function(){return{color:"var(--ion-color-success)"}};function h(n,t){if(1&n&&(l.Kb(0,"ion-col",13),l.Kb(1,"p",14),l.kc(2),l.Jb(),l.Jb()),2&n){const n=l.Ub().$implicit;l.xb(1),l.Zb("ngStyle","Node Running"===n.reason?l.bc(2,m):l.bc(3,p)),l.xb(1),l.mc(" ",n.reason," ")}}const _=function(){return{color:"var(--ion-color-success"}};function w(n,t){if(1&n&&(l.Kb(0,"ion-col",13),l.Kb(1,"p",14),l.kc(2),l.Jb(),l.Jb()),2&n){const n=l.Ub().$implicit;l.xb(1),l.Zb("ngStyle","Welcome"===n.reason?l.bc(2,_):l.bc(3,p)),l.xb(1),l.mc(" ",n.reason," ")}}const v=function(){return{color:"#660066"}};function C(n,t){if(1&n&&(l.Kb(0,"ion-col",13),l.Kb(1,"p",14),l.kc(2),l.Jb(),l.Jb()),2&n){const n=l.Ub().$implicit;l.xb(1),l.Zb("ngStyle","Node Running"!==n.reason&&"Welcome"!==n.reason?l.bc(2,v):l.bc(3,p)),l.xb(1),l.mc(" ",n.reason," ")}}function P(n,t){if(1&n&&(l.Kb(0,"ion-row",9),l.Kb(1,"ion-col",10),l.Kb(2,"p"),l.kc(3),l.Jb(),l.Jb(),l.jc(4,h,3,4,"ion-col",11),l.jc(5,w,3,4,"ion-col",11),l.jc(6,C,3,4,"ion-col",11),l.Kb(7,"ion-col",12),l.Kb(8,"p"),l.kc(9),l.Vb(10,"date"),l.Jb(),l.Jb(),l.Jb()),2&n){const n=t.$implicit;l.xb(3),l.mc(" ",n.amount," "),l.xb(1),l.Zb("ngIf","Node Running"===n.reason),l.xb(1),l.Zb("ngIf","Welcome"===n.reason),l.xb(1),l.Zb("ngIf","Node Running"!==n.reason&&"Welcome"!==n.reason),l.xb(3),l.mc(" ",l.Wb(10,5,n.date_created,"MMM d H:mm")," ")}}function O(n,t){if(1&n&&(l.Kb(0,"div"),l.jc(1,P,11,8,"ion-row",8),l.Jb()),2&n){const n=l.Ub();l.xb(1),l.Zb("ngForOf",n.rewardList)}}const M=[{path:"",component:(()=>{class n{constructor(n,t){this._storeService=n,this._directus=t,this.status="No rewards available yet.",this.totalClaimed=new s.Decimal(0),this.rewardList=[]}ionViewWillEnter(){this._storeService.removeTheirInactivityFileOnLogin(),this.$user=this._storeService.data.subscribe(n=>{this.user=n,this.fetchUserRewards(this.user.refID,this.user.loginData.access_token)})}ionViewWillLeave(){this.$user.unsubscribe()}fetchUserRewards(n,t){if(this.status="Fetching your rewards...",!n||!t)return console.log(""),void(this.status="Fetching rewards failed");this._directus.fetchRewards(n,t).then(n=>((null==n?void 0:n.ok)||(this.status="Fetching rewards from server failed, please check with a Minima admin."),n.json())).then(n=>{(null==n?void 0:n.errors)&&(null==n?void 0:n.errors.length)>0?(this.status=`Something went wrong, ${n.errors[0].message}.  Please check with a Minima admin.`,console.log(null==n?void 0:n.errors)):(this.rewardList=n,this.totalClaimed=new s.Decimal(0),this.rewardList.forEach(n=>{this.totalClaimed=new s.Decimal(n.amount).add(this.totalClaimed)}))})}byDescDate(n,t){return t.date_created.localeCompare(n.date_created)}}return n.\u0275fac=function(t){return new(t||n)(l.Hb(d.a),l.Hb(b.a))},n.\u0275cmp=l.Bb({type:n,selectors:[["app-rewards"]],decls:6,vars:8,consts:[[3,"$total","$actionPageTitle","$rewardspage"],[3,"fullscreen"],[1,"table","ion-no-padding","animate__animated","animate__fadeIn"],["class","ion-no-padding",4,"ngIf"],[4,"ngIf"],[3,"$total","$page"],[1,"ion-no-padding"],[1,"empty-list","ion-no-padding","ion-text-center"],["class","table-content ion-no-margin",4,"ngFor","ngForOf"],[1,"table-content","ion-no-margin"],[1,"ion-text-left","ion-no-padding","manrope-bold"],["class","ion-text-left ion-no-padding",4,"ngIf"],[1,"ion-text-right","ion-no-padding"],[1,"ion-text-left","ion-no-padding"],[3,"ngStyle"]],template:function(n,t){1&n&&(l.Ib(0,"custom-header",0),l.Kb(1,"ion-content",1),l.Kb(2,"ion-grid",2),l.jc(3,f,3,1,"ion-row",3),l.jc(4,O,2,1,"div",4),l.Jb(),l.Jb(),l.Ib(5,"custom-footer",5)),2&n&&(l.Zb("$total",t.totalClaimed)("$actionPageTitle","Claimed Rewards")("$rewardspage",!0),l.xb(1),l.Zb("fullscreen",!0),l.xb(2),l.Zb("ngIf",t.rewardList&&0===t.rewardList.length),l.xb(1),l.Zb("ngIf",t.rewardList&&t.rewardList.length>0),l.xb(1),l.Zb("$total",t.totalClaimed)("$page","rewards"))},directives:[g.a,r.k,r.m,i.k,u.a,r.w,r.j,i.j,i.l],pipes:[i.d],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}ion-grid.table[_ngcontent-%COMP%]{margin-top:15px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]{padding-left:27px;padding-right:27px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-chip.missed-collection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:0;text-align:center;background:transparent;background-color:initial}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-chip.missed-collection[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-decoration:underline;color:var(--ion-color-secondary)}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-variant-numeric:tabular-nums}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-label.awaiting[_ngcontent-%COMP%]{padding:0;display:flex;text-align:right;background:transparent;background-color:initial;color:var(--ion-color-secondary)}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.due[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;justify-content:center}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.due[_ngcontent-%COMP%]   ion-label.remainder-date[_ngcontent-%COMP%]{font-size:12px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.block[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:center;justify-content:center}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div.block[_ngcontent-%COMP%]   ion-label.remainder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:13px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0fa;background:#f0f0fa}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]:last-child{margin-bottom:15px}@media only screen and (min-width:992px){ion-grid.table[_ngcontent-%COMP%]   ion-row.header[_ngcontent-%COMP%]{margin-left:110px;margin-right:110px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-content[_ngcontent-%COMP%]{padding-left:110px;padding-right:110px}ion-grid.table[_ngcontent-%COMP%]   ion-row.table-footer[_ngcontent-%COMP%]{margin-left:110px;margin-right:110px}ion-footer[_ngcontent-%COMP%]   ion-toolbar.table-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar.page-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar.table-header[_ngcontent-%COMP%]{padding-left:110px;padding-right:110px}}ion-content[_ngcontent-%COMP%]{--offset-bottom:auto!important;--overflow:hidden;overflow:auto}ion-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),n})()}];let x=(()=>{class n{}return n.\u0275mod=l.Fb({type:n}),n.\u0275inj=l.Eb({factory:function(t){return new(t||n)},imports:[[c.j.forChild(M)],c.j]}),n})(),k=(()=>{class n{}return n.\u0275mod=l.Fb({type:n}),n.\u0275inj=l.Eb({factory:function(t){return new(t||n)},imports:[[i.b,a.d,r.A,x,o.a]]}),n})()},LLDH:function(n,t,e){"use strict";e.d(t,"a",function(){return g});var o=e("fXoL"),i=e("rux5"),a=e("TEn/"),r=e("ofXK"),c=e("tyNb");const s=["pollButton"];function l(n,t){1&n&&(o.Kb(0,"span",13),o.kc(1," \u2014 "),o.Jb())}function d(n,t){if(1&n&&(o.Kb(0,"span",13),o.kc(1),o.Jb()),2&n){const n=o.Ub(2);o.xb(1),o.lc(n.$total)}}function b(n,t){if(1&n&&(o.Kb(0,"ion-toolbar",9),o.Kb(1,"ion-grid",10),o.Kb(2,"ion-row"),o.Kb(3,"ion-col",11),o.kc(4," Total Amount: "),o.jc(5,l,2,0,"span",12),o.jc(6,d,2,1,"span",12),o.Jb(),o.Jb(),o.Jb(),o.Jb()),2&n){const n=o.Ub();o.xb(5),o.Zb("ngIf",n.$total.equals(0)),o.xb(1),o.Zb("ngIf",n.$total.greaterThan(0))}}let g=(()=>{class n{constructor(n){this._storeService=n}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Hb(i.a))},n.\u0275cmp=o.Bb({type:n,selectors:[["custom-footer"]],viewQuery:function(n,t){if(1&n&&o.nc(s,!0),2&n){let n;o.ec(n=o.Tb())&&(t.pollButton=n.first)}},inputs:{$page:"$page",$total:"$total"},decls:16,vars:1,consts:[[1,"ion-no-border","ion-no-padding","ion-text-center"],["class","table-footer ion-no-padding",4,"ngIf"],[1,"activity","ion-no-padding","animate__animated","animate__fadeIn","animate__faster"],["routerLink","/welcome","slot","start","routerLinkActive","ftr-toolbar-active"],["color","medium","src","assets/incentiveCashInfo.svg"],["routerLink","/rewards","slot","start","routerLinkActive","ftr-toolbar-active"],["color","medium","src","assets/incentiveCashClaimedRewards.svg"],["routerLink","/cash","slot","start","routerLinkActive","ftr-toolbar-active"],["color","medium","src","assets/incentiveCashRewardsPending.svg"],[1,"table-footer","ion-no-padding"],[1,"ion-no-padding","animate__animated"],[1,"ion-no-padding"],["id","total",4,"ngIf"],["id","total"]],template:function(n,t){1&n&&(o.Kb(0,"ion-footer",0),o.jc(1,b,7,2,"ion-toolbar",1),o.Kb(2,"ion-toolbar",2),o.Kb(3,"ion-buttons"),o.Kb(4,"ion-tab-button",3),o.Ib(5,"ion-icon",4),o.Kb(6,"ion-label"),o.kc(7,"Info"),o.Jb(),o.Jb(),o.Kb(8,"ion-tab-button",5),o.Ib(9,"ion-icon",6),o.Kb(10,"ion-label"),o.kc(11,"Claimed"),o.Jb(),o.Jb(),o.Kb(12,"ion-tab-button",7),o.Ib(13,"ion-icon",8),o.Kb(14,"ion-label"),o.kc(15,"Pending"),o.Jb(),o.Jb(),o.Jb(),o.Jb(),o.Jb()),2&n&&(o.xb(1),o.Zb("ngIf","cash"===t.$page||"rewards"===t.$page))},directives:[a.l,r.k,a.z,a.e,a.x,a.C,c.h,c.i,a.o,a.r,a.m,a.w,a.j],styles:["ion-footer[_ngcontent-%COMP%]   ion-toolbar.table-footer[_ngcontent-%COMP%]{padding-left:27px;padding-right:27px}ion-button.poll-button[_ngcontent-%COMP%]{text-transform:none}@media only screen and (min-width:992px){ion-footer[_ngcontent-%COMP%]   ion-toolbar.table-footer[_ngcontent-%COMP%]{padding-left:110px;padding-right:110px}}span#total[_ngcontent-%COMP%]{color:var(--ion-color-success)}"]}),n})()},ON18:function(n,t,e){"use strict";e.d(t,"a",function(){return l});var o=e("mrSG"),i=e("AytR"),a=e("Kmpd"),r=e("fXoL"),c=e("KNWA"),s=e("rux5");let l=(()=>{class n{constructor(n,t){this._directus=n,this._storeService=t,this.environmentApiURL="",this.environmentApiURL=i.a.api,this.serviceJSPayload()}serviceJSPayload(){this.$payload=this._storeService.tokenId.subscribe(n=>{const t=JSON.stringify(n);try{a.Minima.file.save(t,"tokenid.txt",n=>{if(!n.success)throw new Error("TokenId, ScaleFactor not saved!")})}catch(e){a.Minima.log(e)}})}login(n){return Object(o.a)(this,void 0,void 0,function*(){return localStorage.getItem("kickemoff")&&localStorage.removeItem("kickemoff"),this._directus.post(this.environmentApiURL+"auth/login",n)})}logout(){return Object(o.a)(this,void 0,void 0,function*(){document.getElementById("sign-out-btn").style.opacity="1.0",yield this._storeService.getUserDetailsOnce().then(n=>{const t=n;t.loginData.access_token="",t.loginData.refresh_token="",this._storeService.data.next(t),document.location.reload()})})}firstTime(){return new Promise(n=>{a.Minima.file.load("loggedEmail.txt",t=>{t.success?t.data&&JSON.parse(t.data).true&&n(!0):n(!1)})})}logEmail(n){return new Promise((t,e)=>{a.Minima.cmd("hash 256 "+n.toLowerCase(),n=>{if(n.status)if(n.response.hash){const o=JSON.stringify({email:n.response.hash});a.Minima.file.save(o,"loggedEmail.txt",n=>{n.success?t("Email has been logged..."):e("Failed to log user email.")})}else e("File saving unavailable.")})})}checkForEmailTxtFile(){return new Promise((n,t)=>{a.Minima.file.load("loggedEmail.txt",e=>{e||t("Failed to access file system."),n(!!e.success&&!!e.exists)})})}checkEmail(n){return new Promise((t,e)=>{a.Minima.file.load("loggedEmail.txt",o=>{if(o.success)if(o.exists&&o.data){const i=JSON.parse(o.data);a.Minima.cmd("hash 256 "+n.toLowerCase(),n=>{n.status&&n.response.hash&&(n.response.hash===i.email?t("Welcome back :)"):e("Your IncentiveCash MiniDAPP is linked to a previously used email"))})}else t("File not found.");else e("Failed to find file.")})})}getReferenceId(n){return Object(o.a)(this,void 0,void 0,function*(){const t="https://incentivedb.minima.global/users/me?access_token="+n.access_token;return new Promise((n,e)=>{a.Minima.net.GET(t,t=>{t&&t.result?decodeURIComponent(t.result)?n(decodeURIComponent(t.result)):e("Failed to decode server data!"):e("Server time out!  Please check your internet connection or consult an admin.")})})})}makeSessionStart(){return new Promise(n=>{n(new Date||new Date("foo"))})}makeSessionEnd(n){return new Promise(t=>{let e=(new Date).getTime();t(new Date(e+n.expires)||new Date("foo"))})}updateUserData(n,t){return Object(o.a)(this,void 0,void 0,function*(){let e=yield this.makeSessionStart(),o=yield this.makeSessionEnd(n);return new Promise((i,a)=>{this.getReferenceId(n).then(r=>{let c=JSON.parse(r);const s={email:t,pKey:"",refID:c.data.id,loginData:{access_token:n.access_token,refresh_token:n.refresh_token,expires:n.expires,sessions:{sessionStart:e,sessionEnd:o}}};this._storeService.saveFile(JSON.stringify({uid:s.refID}),"uid.txt").then(()=>{i(s)}).catch(n=>{a(""+n)})}).catch(n=>{a(""+n)})})})}}return n.\u0275fac=function(t){return new(t||n)(r.Ob(c.a),r.Ob(s.a))},n.\u0275prov=r.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);