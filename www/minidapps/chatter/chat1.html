<html>

<head>
	<!--   The MINIMA MiFi Javascript Library -->
	<script type="text/javascript" src="minima.js"></script>
	
</head>

<body>

<script type="text/javascript">
	
	var netuid = 0;
	
	//Listen for Minima Events
	window.addEventListener('MinimaEvent', function(evt) {
		 	
		//Deal with each message type
 		if(evt.detail.event == "connected"){
			console.log("connected");
		
		}else if(evt.event == "network"){
			console.log("MinimaEvent : "+JSON.stringify(evt.detail));
		 	
 		}
    });
	
	//Initialise MiFi
	Minima.init();
	
	function connect(){
		Minima.net.connect("127.0.0.1:10000");
	}
	
	function disconnect(){
		Minima.net.disconnect(netuid);
	}
	
	function start(){
		Minima.net.listen(10000,function(json){console.log(JSON.stringify(json));});
	}
	
	function stop(){
		Minima.net.stop(10000);
	}
	
	function info(){
		Minima.net.info(function(json){console.log(JSON.stringify(json));});
	}
	
	function send(){
		var msg = document.getElementById("sender").value;
		var jsonobject = { "name" : "paddy", "message" : msg };
		Minima.net.send(jsonobject, uid);
	}
	
</script>

<center>
<br><br>

CHAT PLAYER 1<br>
<br>
<button onclick="connect();">CONNECT</button> <button onclick="disconnect();">DISCONNECT</button><br>
<br>

<textarea id="chatwindow" rows="20" cols="80">
Chat appears  in here..
</textarea>

<br><br>
<input type=text id="sender" size="50"> &nbsp;&nbsp;&nbsp;
<button onclick="send();">SEND</button>

<br><br>
<button onclick="start();">START SERVER</button> <button onclick="stop();">STOP SERVER</button> <button onclick="info();">INFO</button>
</center>
</body>
</html>