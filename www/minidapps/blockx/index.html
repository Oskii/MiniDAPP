<html>

<head>
	<!--   The MINIMA MiFi Javascript Library -->
	<script type="text/javascript" src="minima.js"></script>
	
</head>

<body style="background: url(apollospace.jpg) no-repeat center center fixed; background-size:cover;">

<script type="text/javascript">

	/*//Update the info..
	function updateInfo(info){
		document.getElementById("infodiv").innerHTML = 
			" CURRENT BLOCK : <b>"+Minima.block+"</b><br><br>"+
			"<span style='font-family:monospace;font-size:14'><a href='#' onclick='updateTxPow(Minima.txpowid); return false;'>"+Minima.txpowid+"</a><span><br><br>";	
	}

	//When you click on a txpowid.. get it and print info..
	function updateTxPow(txpowid){
		//Run a command on minima to get info about this txpow
		Minima.cmd("txpowinfo "+txpowid,function(resp){
			document.getElementById("txpowinfo").value = JSON.stringify(resp,null,2);
		});
	}*/
	
	//When you click on a txpowid.. get it and print info..
	function updateTxPowDetails(txpow){
		document.getElementById("infodiv").innerHTML = " CURRENT BLOCK <b>"+txpow.header.block+"</b> @ "+txpow.header.date+"<br><br>";
			
	    //Run a command on minima to get info about this txpow
		document.getElementById("txpowinfo").value = JSON.stringify(txpow,null,2);
	}
	
	//Wait for the page to load..
	window.addEventListener("load", function(){
	    
		//Listen for Minima Events
		window.addEventListener('MinimaEvent', function(evt) {
			
			//Deal with each message type
	 		if(evt.detail.event == "connected"){
	 			//And set the initial 
	 			//updateTxPow(Minima.txpowid);
	 		
	 		}else if(evt.detail.event == "block"){
	 			//Print some data
	 			updateTxPowDetails(evt.detail.info);
	 		
	 		}else if(evt.detail.event == "transaction"){
	 		
	 		}else if(evt.detail.event == "balance"){
		 		//Nothing yet..
		 		console.log(Minima.util.getBalance("0x00"));
	 		}
	    });
		
		//Initialise MiFi
		Minima.init();
	});
	
</script>

<center>

<br><br>
<div style="display: inline-block;padding:20;background-color:#fff;border-radius: 20px;opacity:0.9;font-size:16px;">
	<br>
	<h2>Super Simple Minima Block Explorer</h2>
	<div id="infodiv">no info yet..</div> 
	<br>
	<textarea spellcheck="false" rows="50" cols="160" style="font-size:10;border:none;" id="txpowinfo"></textarea>

</div>

</center>

</body>

</html>