<html>

<head>
	<!--   The MINIMA MiFi Javascript Library -->
	<script type="text/javascript" src="http://mifi.minima.global/js/minima.js"></script>
</head>

<body style="background: url(apollospace.jpg) no-repeat center center fixed; background-size:cover;">

<script type="text/javascript">

	//Update the info..
	function updateInfo(info){
		document.getElementById("infodiv").innerHTML = 
			" <b>CURRENT BLOCK : "+Minima.block+"</b><br><br>"+
			"<span style='font-family:monospace;font-size:14'><a href='#' onclick='updateTxPow(Minima.txpowid); return false;'>"+Minima.txpowid+"</a><span><br><br>";	
	}

	//When you click on a txpowid.. get it and print info..
	function updateTxPow(txpowid){
		//Run a command on minima to get info about this txpow
		Minima.cmd("txpowinfo "+txpowid,function(resp){
			document.getElementById("txpowinfo").value = JSON.stringify(resp,null,2);
		});
	}
	
	//Wait for the page to load..
	window.addEventListener("load", function(){
	    
		//Listen for Minima Events
		window.addEventListener('MinimaEvent', function(evt) {
			
			//Deal with each message type
	 		if(evt.detail.event == "connected"){
	 			//Print some data
	 			updateInfo();
	 			
	 			//And set the initial 
	 			updateTxPow(Minima.txpowid);
	 			
	 		}else if(evt.detail.event == "newblock"){
	 			//Print some data
	 			updateInfo();
	 		
	 		}else if(evt.detail.event == "newbalance"){
		 		//Nothing yet..
	 		}
	    });
		
		//This is a MiFI APP - this defaults to true
		MINIMA_IS_MINIDAPP = false;
		
		//Initialise MiFi
		Minima.init();
	});
	
</script>

<center>

<br><br>
<div style="display: inline-block;padding:20;background-color:#ddf;border-radius: 20px;opacity:0.9;font-size:16px;">
	<br>
	<h2>Super Simple Minima Block Explorer</h2>
	<div id="infodiv">no info yet..</div> 
	<br>
	<textarea spellcheck="false" rows="35" cols="100" style="background-color:#ddf;border-radius: 20px;border:none;" id="txpowinfo"></textarea>

</div>

</center>

</body>

</html>