<html>

<head>
	<!--   The MINIMA MiFi Javascript Library -->
	<script type="text/javascript" src="http://127.0.0.1:21000/minima.js"></script>
	
	<!--   DEX -->
	<script type="text/javascript" src="./js/dex.js"></script>
	
	<!--  STYLE -->
	<link rel="stylesheet" type="text/css" href="./css/dex.css">

</head>

<body>

<script type="text/javascript">
	//Wait for the page to load..
	window.addEventListener("load", function(){
		//Listen for Minima Events
		window.addEventListener('MinimaEvent', function(evt) {
			//Deal with each message type
	 		if(evt.detail.event == "connected"){
	 			dex_init();
	 			
	 		}else if(evt.detail.event == "newblock"){
		 		//Call the Poll Function.. no need for a new thread polling.. 
		 		dexPollFunction();
		 		
	 		}else if(evt.detail.event == "newbalance"){
		 		UpdateBalance();
	 		}
	    });
		
		//Initialise MiFi
		Minima.init();
		
		//Scroll the order book..
		//var elem = document.getElementById("center_orderbook");  
		//elem.scrollIntoView(true); 
	});
	
</script>

<center>

<table width=100% height=99% style="padding:20;" border=0>
<tr height=5%>
	<td colspan=2 class="infoboxblue">
		<div id="minima_tokenlist"></div>
	</td>
	<td width=33% class="infoboxblue" style="font-size:24;">
		 <b>D E X X E D</b>
	</td>
</tr>

<tr>
	
	<td width=33%>
		<table width=100% height=100% border=0>
			<tr>
				<td class="infobox" height=30%>
					<table width=100% height=100%> 
					<tr><th>MY BALANCE</th></tr>
					<tr><td height=100%>
							<div class="scrollablediv" id="minima_balance"></div>
					</td></tr>
					</table>
				</td>
			</tr>
			
			<tr>
				<td class="infobox" height=35%>
				
					<table width=100% height=100%> 
					<tr><th>MY ORDERS</th></tr>
					<tr><td height=100%>
							<div class="scrollablediv" id="minima_myorders">
								
								<!--  <table width=100% border=0>
									<tr><td>
										<table width=100%>
											<tr class="infoboxblue"><td colspan=2>PADDY</td> <td><button class="cancelbutton">CANCEL</button> </td> </tr>
											<tr class="infoboxred"><td>10</td> <td width=34%>0.02</td> <td width=33%>2</td></tr>
										</table>
									</td></tr>					
								</table> -->
								
							</div>	
						</td>
					</tr>
					</table>
				
				</td>
			</tr>
			
			<tr>
				<td class="infobox" height=35%>
				
					<table width=100% height=100%> 
					<tr><th>MY TRADES</th></tr>
					<tr><td height=100%>
							
							<div class="scrollablediv" id="minima_mytrades">
								<table width=100% border=0>
									<tr><td>
										<table width=100%>
											<tr class="infoboxblue"><td colspan=2>PADDY</td> <td>@254</td> </tr>
											<tr class="infoboxred"><td>10</td> <td width=34%>0.02</td> <td width=33%>2</td></tr>
										</table>
									</td></tr>					
								</table>
														
							</div>	
						</td>
					</tr>
					</table>
				
				</td>
			</tr>
			
		</table>
		
	</td>
	
	<td width=34%>
	
		<table width=100% height=100% border=0>
			
			<tr>
				<td>
					
					<table width=100% height=100% border=0 style="vertical-align:top;background-color:#ffd;border-radius: 10px;">
						<tr height=5%>
							<th width=50% colspan=3>ORDERBOOK</th>
						</tr>
						<tr height=5%>
							<th width=33%>AMOUNT</th> <th width=34%>PRICE</th> <th width=33%>TOTAL</th>
						</tr>
						<tr>
							<td heigth=95% colspan=3>

								<!-- ORDER BOOK -->
								<div style="overflow-y:scroll;height:100%;vertical-align:bottom'">
									<table width=100%>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred" id="center_orderbook"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxred"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxblue"> <td colspan=3>-------</td>  </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
										<tr style="cursor: pointer;" class="infoboxgreen"> <td width=33%>10</td> <td width=34%>0.02</td> <td width=33%>2</td> </tr>
																
									</table>
								</div>
							
							</td>
						</tr>
						
					</table>
					
					
					
				</td>
			</tr>
			
			<tr>
				<td height=50 class="infoboxgreen">
					<input type="number" style="width:120" id="buyamt" placeholder="Token Amount"> @ <input type="number" style="width:120" id="buyprice" placeholder="Price in Minima">
					&nbsp;<button onclick="actionBUY();" class="buybutton">&nbsp;BUY&nbsp;</button> 
				</td>
			</tr>
			
			<tr>
				<td height=50 class="infoboxred">
					<input type="number" style="width:120" id="sellamt" placeholder="Token Amount"> @ <input type="number" style="width:120" id="sellprice" placeholder="Price in Minima">
					&nbsp;<button onclick="" class="sellbutton">&nbsp;SELL&nbsp;</button> 
				</td>
			</tr>
			
		</table>
	
	</td>
	
	<td width=33%>
	
		<table border=0 width=100% height=100%>
			
			<tr>
				<td style="vertical-align:top;background-color:#ffd;border-radius: 10px;">
					
					<div style="overflow-y:scroll;height:100%;'">
						<table width=100%>
							<tr> <th colspan=3> TRADES </th> </tr>
							<tr> <th width=33%>AMOUNT</th> <th width=34%>PRICE</th> <th width=33%>TIME</th> </tr>
							
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxgreen"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
							<tr class="infoboxred"> <td>10</td> <td>0.02</td> <td>345</td> </tr>
						
						</table>
					</div>
					
				</td>
			</tr>
			
		</table>
			
	</td>
</tr>

<tr height=5%>
	<td colspan=2 class="infoboxblue">
		Market <b>MAKERS</b> use the <b>BUY</b> or <b>SELL</b> box to add an order to the orderbook. Market <b>TAKERS</b> click an order in the orderbook.
	</td>
	<td width=33% class="infoboxblue">
		 <div id="minima_blocktime"></div> 
	</td>
</tr>

</table>

</center>

</body>

</html>